<div id="wrap">

  <div id="main" class="clearfix">
    <div>
      <h1>Historical Time Traveller
      <a href="https://twitter.com/share" class="twitter-share-button" data-url="https://mike.tig.as/nypl-hack/placemarks?q=<%= @placemarks.first.latlon.y.to_s + ',' + @placemarks.first.latlon.x.to_s %>" data-lang="en" data-count="none">Tweet</a>
                <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script></h1>
      <h2>Tap any image for a larger view.</h2>
                
    <div id='slider' class='swipe'>
      <div class="clearfix swipe-wrap">
        <% @placemarks.each do |placemark| %>
          <div>
            <a href="<%= placemark.getFullURL %>">
              <img src="<%= placemark.getFullURL %>"/>
            </a>
            <div class="caption">
              <div>
                <strong>Year:</strong> <%= placemark.year %> ||
                <strong><a href="http://maps.google.com/?q=<%= placemark.latlon.y.to_s + ',' + placemark.latlon.x.to_s %>">Map</a></strong>
              </div>
            </div>
          </div>
        <% end %>
      </div>
  </div>

</div>

<div id="footer" class="clearfix">
  <div>
      <ul id="position">
        <% @placemarks.each do |placemark| %>
        <li></li>
        <% end %>
      </ul>
  </div>
  <%= image_tag 'NYPL_logo_600.jpg', :id=>"logo" %>
  <p>Project created at the NYPL Historical Geolocation Hackathon by <a href="https://twitter.com/thejefflarson">Jeff Larson</a>, <a href="https://twitter.com/mtigas">Mike Tigas</a>, <a href="https://twitter.com/sisiwei">Sisi Wei</a> and <a href="https://twitter.com/ag_dubs">Ashley Williams</a>. Huge thanks to <a href="https://github.com/danvk">Dan Vanderkam</a>'s <a href="https://github.com/danvk/sfhistory/blob/master/viewer/nyc-lat-lons.js">geocoding work</a> on all of these images.</p>
</div>

<script>
window.mySwipe = new Swipe(document.getElementById('slider'), {
  //startSlide: 2,
  //speed: 400,
  //auto: 3000,
  continuous: true,
  disableScroll: false,
  stopPropagation: false,
  callback: function(pos) {

      var i = bullets.length;
      while (i--) {
        bullets[i].className = ' ';
      }
      bullets[pos].className = 'on';

    },
  transitionEnd: function(index, elem) {}
});
var bullets = document.getElementById('position').getElementsByTagName('li');
bullets[0].className = 'on';
</script>
